name: CI

on:
  pull_request:
  push:
    branches: [main, 'dev-*']

jobs:
  test:
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest, macos-latest]
    runs-on: ${{ matrix.os }}
    steps:
    - uses: actions/checkout@v5
    - name: Test | ${{ matrix.os }} | no extra-args
      uses: ./

    - name: Test | ${{ matrix.os }} | extra-args
      uses: ./
      with:
        extra-args: '--hook-stage pre-commit --verbose'

    - name: Test | ${{ matrix.os }} | extra-args with CJK characters
      uses: ./
      with:
        extra-args: '--files 中文'

    - name: Test | ${{ matrix.os }} | extra-args with quoted string (with spaces)
      uses: ./
      with:
        extra-args: '--files "file with spaces.txt"'
